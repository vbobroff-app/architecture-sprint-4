# Проектная работа 4

## Что нужно выполнить
В рамках данной работы необходимо ознакомиться с описанием работы компании «Александрит» и выполнить пять заданий. Каждое задание разместить в виде файла в соответствующей директории «Exc1», «Exc2», «Exc3», «Exc4» и «Exc5». 
В каждой директории должен быть один файл с решением:
* «Планирование: анализ, идентификация проблем и поиск решений» — здесь должно быть решение первого задания.
* «Выбор и настройка мониторинга в системе» — решение второго задания.
* «Архитектурное решение по трейсингу» — решение третьего задания.
* «Архитектурное решение по логированию» — решение четвёртого задания.
* «Архитектурное решение по кешированию» — решение пятого задания.

## О компании
Компания «Александрит» занимается производством ювелирных украшений — готовых и на заказ. Фишка компании в том, что пользователь может самостоятельно разработать дизайн украшения. На сайте можно:
загрузить свой файл с 3D-моделью изделия,
воспользоваться конструктором, чтобы создать 3D-модель из готовых элементов.
Компания начинала с продажи простых ювелирных украшений, но потом решила попробовать производство на заказ, и оно «взлетело». Тогда же компания организовала своё производство изделий — до этого она перекупала изделия у других производителей.
Сейчас у «Александрита» есть отдельная CRM для работы с клиентами и MES для производства.
Компания купила софт MES вместе с исходным кодом. MES рассчитывает стоимость производства изделия на своей стороне, приложение онлайн-магазина в расчётах не участвует. Это была одна из причин, почему компания выбрала именно это решение. Расчёт стоимости в среднем занимает 2-3 минуты. Скорость расчёта зависит от количества полигонов в 3D-модели. Если модель сложная и детализированная, время обработки может достигать 30 минут.
MES и CRM взаимодействуют друг с другом через RabbitMQ. Эту интеграцию реализовала команда «Александрита».

## Проблемы компании
В этом году компания осваивает новые рынки сбыта. Нагрузка растёт линейно. В среднем каждый месяц «Александрит» получает на 100 заказов больше, чем в предыдущий. Но тут появились проблемы с заказами. Клиенты жалуются менеджерам по продажам, что они не получили заказ и над их изделием работают уже несколько месяцев, хотя обещали закончить за три недели. Проблемы не на стороне производства: производственные мощности позволяют справиться с заказами и могут обеспечить двукратный рост.
Во втором квартале «Александрит» начал принимать заказы от других продавцов ювелирных изделий, чтобы дополнительно увеличить охват. Для этого компания открыла свой API, который MES использует для расчёта стоимости изделия. В этом сценарии заказ создаётся в CRM через получение сообщения из очереди от MES. Как только «Александрит» внедрил эту возможность, компанию завалило заказами. Но есть и обратная сторона: жалоб от клиентов на просроченные заказы стало ещё больше.
Добавились жалобы со стороны пользователей API. Представители компаний ежедневно сообщают, что не получили свои заказы.
Участились жалобы от операторов: когда они заходят на первую страницу MES, система долго прогружается. На первой странице отображается список заказов в работе по статусам — это дашборд с фильтром. Раньше страница показывала все заказы, но это тормозило загрузку. Команда сделала фильтр по статусам и пагинацию, но это не помогло. Операторам важно видеть самые новые заказы, потому что от этого зависит их вознаграждение, — кто взял заказ, тот и получит оплату.
Через месяц после открытия API компания потеряла уже несколько крупных контрактов из-за проблем с заказами. Недовольство клиентов онлайн-магазина (B2C) тоже растёт. 
Как раз в это время вы начинаете работать в «Александрите» как архитектор. Компания наняла вас в первом квартале, чтобы решить технические проблемы, ещё до открытия API пользователям. Похоже, вам предстоит крещение огнём!

## Как устроена архитектура
Система состоит из трёх приложений:
Онлайн-магазин — написан на Vue и Java Spring Boot.
CRM — SPA-приложение, фронтэнд написан на Vue, бэкенд — на Java Spring Boot.
MES — SPA-приложение, фронтенд написан на React, бэкенд — на C#.
Во всех приложениях есть аутентификация и авторизация. Договоримся, что там проблем нет. Вы можете не брать во внимание эту функциональность при работе над заданием.
Вот схема текущей архитектуры в [модели C4](https://drive.google.com/file/d/19SaMJZKYQ69PXDyE1QoTDnB4kV22qzgK/view?usp=sharing)

Окружений всего три: dev, release и prod. 
Если говорить про инфраструктуру, то сервис начинался как on-premise. Сейчас всё уже перенесли в облако. Каждый из инстансов крутится как EC2, базы данных — это Managed services на Yandex Cloud. Каждое приложение имеет по одному инстансу. Базы данных имеют один инстанс, который работает на запись и на чтение.
CI/CD реализован так:
* Деплой в dev-окружение осуществляется автоматически после мёрджа пул-реквеста и прохождения юнит-тестов.
* В release-окружения версию деплоят вручную.
* В продакшн версию тоже деплоят вручную.