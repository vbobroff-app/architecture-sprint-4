
### Трейсинг 

Это одно из основных назначений трейсинга — отслеживать последовательность вызовов и находить точное место, где произошла проблема.

Трейсинг начинается с точки входа запроса в приложение: он запускается для запроса и имеет уникальный идентификатор, сгенерированный для этого запроса. По мере того как трафик переходит от сервиса к сервису, каждый сервис добавляет информацию (например, время поступления запроса в сервис и время, затраченное на его обработку). 
Визуализация данных трейсинга в Jaeger для получения наглядной картины выполнения запроса и выявления проблемных участков.
Использование trace_id и span_id позволяет восстановить контекст всей операции, проследить путь запроса через все микросервисы и найти, где именно произошла ошибка.
Временные метки позволяют понять, на каком этапе обработки запроса возникла задержка. Это может быть ключевым фактором в диагностике проблем с производительностью и в выявлении узких мест.

### Мотивация
Трейсинг при возникновении задержек поможет быстро локализовать проблему. Если пользователь не получит заказ вовремя будет возможность отследить выполнение запросов и оперативно решить проблему.
Внедрение трейсинга позволит:
* отследить последовательности вызовов между сервисами, чтобы найти, где запрос «застрял»
* провести анализ временных меток в трейсинге для определения задержек на разных этапах обработки запроса
* произвести восстановление контекста операции  (с помощью trace_id и span_id) для понимания полного пути запроса через все микросервисы

Визуализация позволит получить наглядную картину выполнения запроса и выявления проблемных участков


### Предлагаемое решение

Реализовать трейсинг с помощью стека OpenTelemtry-Jaeger.
OpenTelemetry (OTel) — платформа наблюдения, которая предоставляет стандартизированный способ сбора, обработки и экспорта трассировок. 
Jaeger — инструмент и  визуализации трассировок, Jaeger-UI — веб-интерфейс для поиска и просмотров трейсов.
Jaeger интегрируется с  OpenTelemetry. 

Внедрить TelemetrySDK необходимо в сервисы:
- Shop API
- CRM API
- MES API

[Схема решения](https://drive.google.com/file/d/1zXYRg0YleaIwnEg5-EWFQ2sSjbewqmMk/view?usp=sharing)

### Компромиссы 

Трейсинг сложно реализовать при формировании заказов через пользовательское API, когда другие заказчики формируют заказы напрямую в скрвисе MES. Пользы будет меньше, чем дорогая реализация конвертации и обработки данных. Сложность вызвана в том числе, трудностью заставить проприетарную систему отдавать метрики в нужном формате, может потребоваться дорогостоящая доработка.
Обеспечить безопасность трейсинга внедрением аутентификации — получение и просмотр данных необходимо ограничить ролью администратора системы.